# NOTE: Type forced to be:
# trs2 - TRS-80 Level II BASIC tokenized file
    5 DEFINT A - Z : DEFSNG V,R,T
   10 REM WRITTEN BY JAMES OKAMURA
   20 REM MOUNTAIN VIEW HIGH SCHOOL
   30 REM MOUNTAIN VIEW, CA 94041
   40 REM REVISED FOR TRS-80 BY DOUG BENEDICT
   50 REM COPYRIGHT (C) 1978 BY JAMES OKAMURA AND MARIN
   51 REM COMPUTER CENTER AND CREATIVE COMPUTING
   52 CLS : PRINT @283,"STARWARS"
   53 PRINT @409,"COPYRIGHT BY"
   54 PRINT @470,"CREATIVE COMPUTING"
   55 PRINT @536,"P.O. BOX 789-M"
   56 PRINT @593,"MORRISTOWN, NEW JERSEY 07960""
   60 REM COMPUTER CENTER ALL RIGHTS RESERVED
   61 FOR I = 1 TO 2000 : NEXT I : CLS 
   62 READ D : DIM YY(D),TY(D)
   63 FOR P = 1 TO D
   65 READ YY(P),TY(P)
   67 NEXT P
   70 RANDOM 
   80 QQ$ = "BNMGHJTYU "
   90 X1 = 0 : Y1 = 0
  100 PRINT @ 400,"* * *  S T A R W A R S   I  * * *"
  110 PRINT @ 960,"PRESS 'ENTER' FOR YOUR BRIEFING "; CHR$ (14);
  115 A$ = INKEY$ : IF A$ = ""THEN 115 : ELSE PRINT CHR$ (15);
  120 CLS : PRINT "WELCOME, REBEL PILOT..." : PRINT 
  130 PRINT "YOU WILL BE COMMANDING A SQUADRON OF X-WING FIGHTERS AGAINST"
  140 PRINT "GALACTIC EMPIRE TIE FIGHTERS LED BY THE EVIL DARTH VADER!"
  150 PRINT : PRINT "THE BATTLE MUST END IN OUR FAVOR TO SAVE THE REBELLION FROM"
  160 PRINT "FAILURE." : PRINT 
  170 PRINT "YOU MAY CONTROL YOUR CRAFT WITH THE KEYS SHOWN BELOW : "
  180 PRINT TAB 27);"T  Y  U"
  190 PRINT TAB 28); CHR$ (137);" [ "; CHR$ (134)
  200 PRINT "    PRESS SPACE BAR"; TAB 27);"G "; CHR$ (93);"H"; CHR$ (94);" J"; TAB 42);"DARTH VADER COUNTS"
  210 PRINT "       TO FIRE"; TAB 28); CHR$ (134);" "; CHR$ (92);" "; CHR$ (137); TAB 43);"AS TWO FIGHTERS!"
  220 PRINT TAB 27);"B  N  M"
  230 PRINT @ 960,""; : INPUT "PRESS 'ENTER' TO CONTINUE";A$
  240 CLS : INPUT "FOR HOW MANY TIME UNITS TO YOU WANT TO BATTLE (MINIMUM 25)";U$
  250 IF LEN (U$) = 0 THEN 240
  260 T2 = VAL (U$) : IF T2 < 25 THEN T2 = 25
  270 PRINT : PRINT "     SELECT THE SPEED : ": PRINT 
  280 PRINT TAB 10);"1-SLOWEST"
  290 PRINT TAB 10);"2-MEDIUM"
  300 PRINT TAB 10);"3-FAST"
  310 PRINT TAB 10);"4-JEDI KNIGHT"
  320 PRINT @ 704,"WHAT IS THE SPEED?  {0x08}"; CHR$ (14);
  325 BB$ = INKEY$ : IF BB$ = ""THEN 325 : ELSE PRINT BB$; CHR$ (15); : B = VAL (BB$)
  330 IF B < 1 OR B > 4 THEN 320
  340 T0 = INT (45 / B * 2)
  350 CLS : PRINT @ 261,"YOU HAVE";T2;"TIME UNITS TO SHOOT DOWN AS MANY"
  360 PRINT " TIE-FIGHTERS AS YOU CAN.  YOU HAVE";T0;"UNITS TO DESTORY"
  370 PRINT " EACH ONE.  IF YOU DON'T, HE WILL DESTORY ONE OF YOUR SHIPS!"
  380 PRINT @ 651,"GOOD LUCK AND MAY THE FORCE BE WITH YOU"
  390 PRINT @ 960,"PRESS 'ENTER' TO BEGIN THE BATTLE! "; CHR$ (14);
  395 A$ = INKEY$ : IF A$ = ""THEN 395 : ELSE PRINT CHR$ (15);
  400 CLS : PRINT 
  410 PRINT "  TIME : "
  420 PRINT "  TIME UNTIL"
  430 PRINT "   ATTACK : "
  440 PRINT "  SHOTS"
  450 PRINT "   TAKEN : "
  460 PRINT "  **SCORE**"
  470 PRINT "   YOU : "
  480 PRINT "  THEM : "
  490 PRINT 
  500 PRINT " T  Y  U"
  510 PRINT "  "; CHR$ (137);" [ "; CHR$ (134);" SPACE"
  520 PRINT " G "; CHR$ (93);"H"; CHR$ (94);" J  BAR"
  530 PRINT "  "; CHR$ (134);" "; CHR$ (92);" "; CHR$ (137);"    TO"
  540 PRINT " B  N  M FIRE"
  550 C5 = 73 : C4 = 73
  560 FOR A = 15936 TO 15949 : POKE A,191 : NEXT A
  570 FOR A = 15360 TO 15423 : POKE A,191 : POKE A + 960,191 : NEXT A
  580 FOR A = 15486 TO 16382 STEP 64 : POKE A,191 : POKE A + 1,191
  590 POKE A - 49,170 : POKE A - 62,191 : NEXT A : POKE 16333,191 : POKE 15949,191
  600 GOSUB 1240 : T1 = T0
  610 X = RND (R) * 43 + 16 : Y = RND (R) * 13 + 2 : V1 = 3 - B : GOSUB 1190
  620 R = RND (R) : IF R < = V1 / 4 THEN 640
  630 T = INT ( RND (R) * 8) + 1 : GOSUB 1040
  640 GOSUB 1140 : T$ = INKEY$ : IF T$ < > ""THEN GOSUB 2000 : T = Q : Z = T
  660 IF T > 0 AND T < = 9 THEN GOTO 680
  670 IF T = 10 THEN 720
  680 GOSUB 1040 : GOSUB 1140
  690 GOSUB 1170 : GOSUB 1190
  700 T2 = T2 - B / 4 : T1 = T1 - B / 4 : C2 = 15434 : C3 = INT (T2) : GOSUB 960
  710 C3 = INT (T1) : C2 = 15563 : F = 1 : GOSUB 960 : F = 0 : GOTO 1270
  720 K = K + 1 : C3 = K : C2 = 15691 : GOSUB 960
  730 FOR A = 7 TO 1 STEP - 1 : POKE A * 63 + 15847,134
  740 POKE A * 65 + 15847,137 : NEXT A : E = PEEK (15847)
  750 IF E < > 43 THEN 780 : ELSE GOSUB 760 : GOTO 1270
  760 FOR A = 7 TO 1 STEP - 1 : POKE A * 63 + 15847,32
  770 POKE A * 65 + 15847,32 : NEXT A : RETURN 
  780 FOR A = 1 TO 10 : POKE 15847,191
  790 FOR C = 1 TO 5 : NEXT C : POKE 15847,E : FOR C = 1 TO 5 : NEXT C : NEXT A
  800 GOSUB 760
  810 FOR A = 1 TO 5
  820 S1 = 191 : S2 = 191 : S3 = 191 : S4 = 191 : S5 = 191
  830 GOSUB 1170
  850 S1 = C5 : S2 = 61 : S3 = 15 : S4 = 61 : S5 = C4
  860 GOSUB 1170 : NEXT A
  870 K1 = M - 551
  880 FOR A = 1 TO D : POKE K1 + YY(A),TY(A) : NEXT A
  890 T1 = T0 : IF C4 = 41 THEN Y1 = Y1 + 2 : ELSE Y1 = Y1 + 1
  900 C2 = 15817 : C3 = Y1 : GOSUB 960
  910 GOSUB 1240
  920 FOR A = 1 TO 8 : POKE 15847 - A,32 : POKE 15847 + A,32 : NEXT A
  930 GOSUB 1240 : V = RND (R) * 5 : IF V = 1 THEN 950
  940 C5 = 73 : C4 = 73 : GOTO 610
  950 C5 = 40 : C4 = 41 : GOTO 610
  960 FOR C = 0 TO 2
  970 A = INT ((C3 * .1 - INT (C3 * .1)) * 10)
  980 IF F = 1 AND C = 2 THEN 1000
  990 POKE C2 - C,A + 48
 1000 C3 = (C3 - A) / 10 : NEXT C : RETURN 
 1010 POKE C2 - 1,A + 48
 1020 C3 = (C3 - A) / 10 : GOTO 960
 1030 POKE C2 - 2,A + 48 : RETURN 
 1040 ON T GOTO 1130,1120,1110,1100,1090,1080,1070,1060,1050
 1050 X = X - 1 : Y = Y + 1 : RETURN 
 1060 Y = Y + 2 : RETURN 
 1070 X = X + 1 : Y = Y + 1 : RETURN 
 1080 X = X - 3
 1090 RETURN 
 1100 X = X + 3 : RETURN 
 1110 X = X - 1 : Y = Y - 1 : RETURN 
 1120 Y = Y - 2 : RETURN 
 1130 X = X + 1 : Y = Y - 1 : RETURN 
 1140 IF X > 59 THEN X = 59 : ELSE IF X < 16 THEN X = 16
 1150 IF Y > 15 THEN Y = 15 : ELSE IF Y < 2 THEN Y = 2
 1160 RETURN 
 1170 POKE M - 2,S1 : POKE M - 1,S2 : POKE M,S3 : POKE M + 1,S4 : POKE M + 2,S5
 1180 RETURN 
 1190 M = 15296 + Y * 64 + X
 1200 S1 = PEEK (M - 2) : S2 = PEEK (M - 1) : S3 = PEEK (M) : S4 = PEEK (M + 1)
 1210 S5 = PEEK (M + 2)
 1220 POKE M - 2,C5 : POKE M - 1,61 : POKE M,15 : POKE M + 1,61 : POKE M + 2,C4
 1230 RETURN 
 1240 FOR A = 3 TO 9 : POKE 15847 - A,45 : POKE 15847 + A,45 : NEXT A
 1250 FOR A = 2 TO 5 : POKE 15847 - A * 64,33 : POKE 15847 + A * 64,33 : NEXT A
 1260 POKE 15847,43 : RETURN 
 1270 IF T2 < = 0 THEN 1340 : ELSE IF T1 > 0 THEN 620
 1280 Y = 8 : X = 39 : GOSUB 1170 : GOSUB 1190
 1290 FOR F = 1 TO 2
 1300 FOR A = 1 TO 7 : POKE 15847 + A * 63,134 : POKE 15847 + A * 65,137 : NEXT A
 1310 FOR A = 1 TO 7 : POKE 15847 + A * 63,32 : POKE 15847 + A * 65,32 : NEXT A
 1320 NEXT F : X1 = X1 + 1 : C2 = 15881 : C3 = X1 : GOSUB 960
 1330 GOSUB 1170 : GOSUB 1240 : T1 = T0 : GOTO 610
 1340 CLS : PRINT : PRINT " FINAL OUTCOME : ": PRINT : PRINT TAB 10);"YOU";Y1;"     ENEMY";X1
 1350 PRINT : PRINT : PRINT 
 1360 IF Y1 > X1 THEN PRINT " YOU AND THE REBEL FORCES WIN!!" : ELSE 1380
 1370 GOTO 1400
 1380 PRINT " YOU LOSE AND THE REBELLION IS DOOMED!!!"
 1390 PRINT : PRINT "DO YOU WANT ANOTHER BATTLE, MAYBE WE STILL HAVE A CHANCE! "; CHR$ (14); : GOTO 1403
 1400 PRINT : PRINT "DO YOU WANT ANOTHER BATTLE? "; CHR$ (14);
 1403 FOR W1 = 1 TO 5 : A$ = INKEY$ : NEXT W1
 1404 X1 = 0 : Y1 = 0 : K = 0
 1405 A$ = INKEY$ : IF A$ = ""THEN 1405 : ELSE PRINT A$; CHR$ (15)
 1410 IF A$ = "Y" THEN 240 : ELSE K = 0 : CLS 
 1411 PRINT "THANKS FOR PLAYING!" : PRINT : PRINT "TO PLAY AGAIN, TYPE 'RUN'."
 1413 PRINT : PRINT "TO LOAD ANOTHER PROGRAM, TYPE 'CLOAD''." : PRINT : END 
 1420 DATA 149,551,191,487,191,615,191,550,191,552,191
 1430 DATA 486,191,616,191,614,191,488,191,549,191,553,191
 1440 DATA 485,191,617,191,613,191,489,191,548,191,554,191
 1450 DATA 489,191,490,191,618,191,555,191
 1460 DATA 423,191,679,191,547,191,422,191,680,191
 1470 DATA 678,191,424,191,421,191,681,191,677,191,425,191
 1480 DATA 484,191,612,191,420,191,682,191
 1490 DATA 426,191,483,191,619,191,611,191,491,191
 1500 DATA 546,191,556,191,551,42,487,42,550,42,615,42
 1510 DATA 232,46,808,46,805,46,413,46,561,46
 1520 DATA 432,46,748,46,737,46,551,35,487,35,615,35,550,35
 1530 DATA 552,35,486,32,616,32,614,32,488,32,549,32,553,32
 1540 DATA 485,32,617,32,613,32,489,32,548,32,554,32,423,32
 1550 DATA 679,32,547,32,555,32,422,32,680,32,678,32,424,32
 1560 DATA 421,32,681,32,677,32,425,32,484,32,618,32,612,32
 1570 DATA 490,32,353,46,364,46,686,46,480,46,542,46,430,46
 1580 DATA 746,46,292,46,607,46,413,32,805,32,561,32,232,32
 1590 DATA 808,32,672,46,495,46,623,46,298,46,621,46,294,46
 1600 DATA 739,46,743,46,621,46,551,32,487,32,615,32,552,32
 1610 DATA 550,32,144,32,807,32,480,32,495,32,748,32,542,32
 1620 DATA 432,32,686,32,739,32,364,32,621,32,746,32,607,32
 1630 DATA 353,32,623,32,737,32,430,32,672,32,294,32,298,32
 1640 DATA 292,32
 1650 DATA 556,32,491,32,426,32,619,32,682,32
 1660 DATA 546,32,611,32,483,32,420,32,806,32,742,32,743,32
 2000 FOR Q = 1 TO 10
 2010 IF T$ = MID$ (QQ$,Q,1) THEN RETURN 
 2020 NEXT Q : Q = Z : RETURN 
